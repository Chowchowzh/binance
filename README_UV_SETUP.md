# Binanceäº¤æ˜“ç­–ç•¥é¡¹ç›® - UVç¯å¢ƒé…ç½®æŒ‡å—

è¿™æ˜¯ä¸€ä¸ªåŸºäºTransformeræ¨¡å‹çš„åŠ å¯†è´§å¸äº¤æ˜“ç­–ç•¥é¡¹ç›®ï¼Œä½¿ç”¨ç°ä»£åŒ–çš„PythonåŒ…ç®¡ç†å·¥å…·UVæ¥ç®¡ç†è™šæ‹Ÿç¯å¢ƒå’Œä¾èµ–ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹æ³•ä¸€ï¼šè‡ªåŠ¨å®‰è£…è„šæœ¬ï¼ˆæ¨èï¼‰

```bash
# ç»™è„šæœ¬æ‰§è¡Œæƒé™
chmod +x setup_env.sh

# è¿è¡Œè‡ªåŠ¨å®‰è£…è„šæœ¬
./setup_env.sh
```

### æ–¹æ³•äºŒï¼šæ‰‹åŠ¨å®‰è£…

```bash
# 1. å®‰è£…UVï¼ˆå¦‚æœæœªå®‰è£…ï¼‰
curl -LsSf https://astral.sh/uv/install.sh | sh

# 2. æ·»åŠ UVåˆ°PATH
export PATH="$HOME/.local/bin:$PATH"

# 3. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
uv venv

# 4. æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
source .venv/bin/activate

# 5. å®‰è£…é¡¹ç›®ä¾èµ–
uv pip install -e .
```

## ğŸ“¦ é¡¹ç›®ç»“æ„

```
binance/
â”œâ”€â”€ strategy/                    # äº¤æ˜“ç­–ç•¥æ ¸å¿ƒæ¨¡å—
â”‚   â”œâ”€â”€ transformer_model.py    # Transformeræ¨¡å‹å®šä¹‰
â”‚   â”œâ”€â”€ train_transformer.py    # æ¨¡å‹è®­ç»ƒè„šæœ¬
â”‚   â”œâ”€â”€ market_making.py         # ä¸»ç­–ç•¥æ‰§è¡Œè„šæœ¬
â”‚   â”œâ”€â”€ smart_position_control.py # æ™ºèƒ½ä»“ä½æ§åˆ¶
â”‚   â”œâ”€â”€ signal_generator.py      # ä¿¡å·ç”Ÿæˆå™¨
â”‚   â”œâ”€â”€ backtest_runner.py       # å›æµ‹è¿è¡Œå™¨
â”‚   â””â”€â”€ ...
â”œâ”€â”€ dataset/                     # æ•°æ®å¤„ç†æ¨¡å—
â”‚   â”œâ”€â”€ dataset.py              # æ•°æ®åº“æ“ä½œ
â”‚   â”œâ”€â”€ config.py               # æ•°æ®é…ç½®
â”‚   â””â”€â”€ torch_dataset.py        # PyTorchæ•°æ®é›†
â”œâ”€â”€ market_api/                  # å¸‚åœºæ•°æ®API
â”‚   â”œâ”€â”€ main.py                 # æ•°æ®è·å–ä¸»ç¨‹åº
â”‚   â””â”€â”€ marketdata.py           # å¸‚åœºæ•°æ®æ¥å£
â”œâ”€â”€ backtest_results/           # å›æµ‹ç»“æœå­˜å‚¨
â”œâ”€â”€ signal_cache/               # ä¿¡å·ç¼“å­˜ç›®å½•
â”œâ”€â”€ pyproject.toml              # UVé¡¹ç›®é…ç½®æ–‡ä»¶
â”œâ”€â”€ requirements.txt            # ä¼ ç»Ÿä¾èµ–æ–‡ä»¶ï¼ˆå¤‡ç”¨ï¼‰
â””â”€â”€ setup_env.sh               # ç¯å¢ƒè®¾ç½®è„šæœ¬
```

## ğŸ”§ ä¸»è¦ä¾èµ–åŒ…

### æ ¸å¿ƒè®¡ç®—åº“
- **pandas**: æ•°æ®å¤„ç†å’Œåˆ†æ
- **numpy**: æ•°å€¼è®¡ç®—
- **scipy**: ç§‘å­¦è®¡ç®—
- **torch**: æ·±åº¦å­¦ä¹ æ¡†æ¶ï¼ˆTransformeræ¨¡å‹ï¼‰

### æœºå™¨å­¦ä¹ 
- **scikit-learn**: æœºå™¨å­¦ä¹ å·¥å…·
- **lightgbm**: æ¢¯åº¦æå‡æ ‘æ¨¡å‹
- **joblib**: å¹¶è¡Œè®¡ç®—å’Œæ¨¡å‹åºåˆ—åŒ–

### é‡‘èåˆ†æ
- **ta-lib**: æŠ€æœ¯æŒ‡æ ‡è®¡ç®—
- **arch**: æ—¶é—´åºåˆ—åˆ†æ
- **statsmodels**: ç»Ÿè®¡å»ºæ¨¡

### æ•°æ®å­˜å‚¨
- **pymongo**: MongoDBæ•°æ®åº“æ“ä½œ
- **pyarrow**: é«˜æ•ˆæ•°æ®å­˜å‚¨æ ¼å¼

### å¯è§†åŒ–
- **matplotlib**: åŸºç¡€ç»˜å›¾
- **seaborn**: ç»Ÿè®¡å¯è§†åŒ–
- **plotly**: äº¤äº’å¼å›¾è¡¨

## ğŸ¯ ä¸»è¦åŠŸèƒ½æ¨¡å—

### 1. æ•°æ®è·å–å’Œå¤„ç†
```bash
# æ¿€æ´»ç¯å¢ƒ
source .venv/bin/activate

# è·å–å¸‚åœºæ•°æ®
python market_api/main.py

# æ•°æ®é¢„å¤„ç†
python strategy/preprocess_data.py
```

### 2. æ¨¡å‹è®­ç»ƒ
```bash
# è®­ç»ƒTransformeræ¨¡å‹
python strategy/train_transformer.py
```

### 3. ç­–ç•¥å›æµ‹
```bash
# è¿è¡Œå®Œæ•´çš„ç­–ç•¥å›æµ‹
python strategy/market_making.py
```

### 4. æ™ºèƒ½ä»“ä½æ§åˆ¶
é¡¹ç›®åŒ…å«å¤šç§ä»“ä½æ§åˆ¶ç­–ç•¥ï¼š
- **ä¸­æ¢ç­–ç•¥**: åŸºäºè®¾å®šä¸­æ¢çš„çº¿æ€§æ˜ å°„
- **å‡¯åˆ©å…¬å¼**: åŸºäºæœŸæœ›æ”¶ç›Šçš„ç»å…¸ç­–ç•¥
- **è‡ªé€‚åº”ç­–ç•¥**: éçº¿æ€§ä¿¡å·å˜æ¢
- **æ³¢åŠ¨ç‡è°ƒæ•´**: æ ¹æ®å¸‚åœºæ³¢åŠ¨åŠ¨æ€è°ƒæ•´
- **åŠ¨é‡å‡å€¼å›å½’**: å¤šä¿¡å·èåˆç­–ç•¥
- **é›†æˆç­–ç•¥**: å¤šç­–ç•¥åŠ æƒç»„åˆ

## ğŸ› ï¸ å¼€å‘å·¥å…·

### å®‰è£…å¼€å‘ä¾èµ–
```bash
# å®‰è£…å¼€å‘å·¥å…·ï¼ˆå·²åœ¨pyproject.tomlä¸­é…ç½®ï¼‰
uv pip install --dev
```

### è¿è¡Œæµ‹è¯•
```bash
# è¿è¡Œå•å…ƒæµ‹è¯•
pytest
```

### Jupyterç¯å¢ƒ
```bash
# å¯åŠ¨Jupyter
jupyter lab
```

## ğŸ” ç¯å¢ƒç®¡ç†

### æŸ¥çœ‹å·²å®‰è£…åŒ…
```bash
uv pip list
```

### æ›´æ–°ä¾èµ–
```bash
uv pip install --upgrade -e .
```

### æ·»åŠ æ–°ä¾èµ–
```bash
# æ·»åŠ æ–°åŒ…åˆ°pyproject.tomlï¼Œç„¶åè¿è¡Œï¼š
uv pip install -e .
```

### å¯¼å‡ºä¾èµ–æ¸…å•
```bash
uv pip freeze > requirements-frozen.txt
```

## ğŸŒ ç½‘ç»œé…ç½®

å¦‚æœç½‘ç»œè¿æ¥æœ‰é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨å›½å†…é•œåƒï¼š

```bash
# ä½¿ç”¨æ¸…åå¤§å­¦é•œåƒ
uv pip install -i https://pypi.tuna.tsinghua.edu.cn/simple -e .

# æˆ–ä½¿ç”¨é˜¿é‡Œäº‘é•œåƒ
uv pip install -i https://mirrors.aliyun.com/pypi/simple/ -e .
```

## ğŸ“ é…ç½®æ–‡ä»¶è¯´æ˜

### pyproject.toml
- é¡¹ç›®å…ƒæ•°æ®å’Œä¾èµ–ç®¡ç†
- åŒ…å‘ç°é…ç½®
- å¼€å‘å·¥å…·é…ç½®

### requirements.txt
- ä¼ ç»Ÿpipæ ¼å¼çš„ä¾èµ–æ–‡ä»¶
- ä½œä¸ºå¤‡ç”¨æ–¹æ¡ˆä¿ç•™

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **Pythonç‰ˆæœ¬**: éœ€è¦Python 3.9æˆ–æ›´é«˜ç‰ˆæœ¬
2. **ta-libå®‰è£…**: å¦‚æœta-libå®‰è£…å¤±è´¥ï¼Œå¯èƒ½éœ€è¦å…ˆå®‰è£…ç³»ç»Ÿä¾èµ–
3. **MongoDB**: æ•°æ®å­˜å‚¨éœ€è¦MongoDBæœåŠ¡
4. **å†…å­˜è¦æ±‚**: Transformeræ¨¡å‹è®­ç»ƒéœ€è¦è¶³å¤Ÿçš„å†…å­˜

## ğŸ”§ æ•…éšœæ’é™¤

### ta-libå®‰è£…é—®é¢˜
```bash
# macOS
brew install ta-lib

# Ubuntu/Debian
sudo apt-get install libta-lib-dev

# ç„¶åé‡æ–°å®‰è£…PythonåŒ…
uv pip install ta-lib
```

### æƒé™é—®é¢˜
```bash
chmod +x setup_env.sh
```

### è™šæ‹Ÿç¯å¢ƒé—®é¢˜
```bash
# åˆ é™¤å¹¶é‡æ–°åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
rm -rf .venv
uv venv
source .venv/bin/activate
uv pip install -e .
```

## ğŸ“ æ”¯æŒ

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. Pythonç‰ˆæœ¬æ˜¯å¦ç¬¦åˆè¦æ±‚
2. ç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸
3. ç³»ç»Ÿä¾èµ–æ˜¯å¦å·²å®‰è£…
4. æƒé™è®¾ç½®æ˜¯å¦æ­£ç¡®

---

**äº«å—ç°ä»£åŒ–çš„PythonåŒ…ç®¡ç†ä½“éªŒï¼** ğŸ‰ 